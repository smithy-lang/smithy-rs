// Code generated by software.amazon.smithy.rust.codegen.smithy-rs. DO NOT EDIT.
#[non_exhaustive]
#[derive(Debug)]
pub struct CapturePokemonEventsErrorMarshaller;

impl CapturePokemonEventsErrorMarshaller {
    pub fn new() -> Self {
        CapturePokemonEventsErrorMarshaller
    }
}
impl ::aws_smithy_eventstream::frame::MarshallMessage for CapturePokemonEventsErrorMarshaller {
    type Input = crate::error::CapturePokemonEventsError;
    fn marshall(
        &self,
        _input: Self::Input,
    ) -> std::result::Result<
        ::aws_smithy_types::event_stream::Message,
        ::aws_smithy_eventstream::error::Error,
    > {
        let mut headers = Vec::new();
        headers.push(::aws_smithy_types::event_stream::Header::new(
            ":message-type",
            ::aws_smithy_types::event_stream::HeaderValue::String("exception".into()),
        ));
        let payload = match _input {
            crate::error::CapturePokemonEventsError::InvalidPokeballError(inner) => {
                headers.push(::aws_smithy_types::event_stream::Header::new(
                    ":exception-type",
                    ::aws_smithy_types::event_stream::HeaderValue::String(
                        "invalid_pokeball".into(),
                    ),
                ));
                headers.push(::aws_smithy_types::event_stream::Header::new(
                    ":content-type",
                    ::aws_smithy_types::event_stream::HeaderValue::String(
                        "application/json".into(),
                    ),
                ));
                crate::protocol_serde::shape_invalid_pokeball_error::ser_invalid_pokeball_error_error(&inner)
                                            .map_err(|err| ::aws_smithy_eventstream::error::Error::marshalling(format!("{}", err)))?
            }
            crate::error::CapturePokemonEventsError::ThrottlingError(inner) => {
                headers.push(::aws_smithy_types::event_stream::Header::new(
                    ":exception-type",
                    ::aws_smithy_types::event_stream::HeaderValue::String("throttlingError".into()),
                ));
                headers.push(::aws_smithy_types::event_stream::Header::new(
                    ":content-type",
                    ::aws_smithy_types::event_stream::HeaderValue::String(
                        "application/json".into(),
                    ),
                ));
                crate::protocol_serde::shape_throttling_error::ser_throttling_error_error(&inner)
                    .map_err(|err| {
                        ::aws_smithy_eventstream::error::Error::marshalling(format!("{}", err))
                    })?
            }
        };
        Ok(::aws_smithy_types::event_stream::Message::new_from_parts(
            headers, payload,
        ))
    }
}

#[non_exhaustive]
#[derive(Debug)]
pub struct CapturePokemonEventsMarshaller;

impl CapturePokemonEventsMarshaller {
    pub fn new() -> Self {
        CapturePokemonEventsMarshaller
    }
}
impl ::aws_smithy_eventstream::frame::MarshallMessage for CapturePokemonEventsMarshaller {
    type Input = crate::model::CapturePokemonEvents;
    fn marshall(
        &self,
        input: Self::Input,
    ) -> std::result::Result<
        ::aws_smithy_types::event_stream::Message,
        ::aws_smithy_eventstream::error::Error,
    > {
        let mut headers = Vec::new();
        headers.push(::aws_smithy_types::event_stream::Header::new(
            ":message-type",
            ::aws_smithy_types::event_stream::HeaderValue::String("event".into()),
        ));
        let payload = match input {
            Self::Input::Event(inner) => {
                headers.push(::aws_smithy_types::event_stream::Header::new(
                    ":event-type",
                    ::aws_smithy_types::event_stream::HeaderValue::String("event".into()),
                ));
                if let Some(value) = inner.name {
                    headers.push(::aws_smithy_types::event_stream::Header::new(
                        "name",
                        ::aws_smithy_types::event_stream::HeaderValue::String(value.into()),
                    ));
                }
                if let Some(value) = inner.captured {
                    headers.push(::aws_smithy_types::event_stream::Header::new(
                        "captured",
                        ::aws_smithy_types::event_stream::HeaderValue::Bool(value),
                    ));
                }
                if let Some(value) = inner.shiny {
                    headers.push(::aws_smithy_types::event_stream::Header::new(
                        "shiny",
                        ::aws_smithy_types::event_stream::HeaderValue::Bool(value),
                    ));
                }
                headers.push(::aws_smithy_types::event_stream::Header::new(
                    ":content-type",
                    ::aws_smithy_types::event_stream::HeaderValue::String(
                        "application/octet-stream".into(),
                    ),
                ));
                if let Some(inner_payload) = inner.pokedex_update {
                    inner_payload.into_inner()
                } else {
                    Vec::new()
                }
            }
        };
        Ok(::aws_smithy_types::event_stream::Message::new_from_parts(
            headers, payload,
        ))
    }
}

#[non_exhaustive]
#[derive(Debug)]
pub struct AttemptCapturingPokemonEventUnmarshaller;

impl AttemptCapturingPokemonEventUnmarshaller {
    pub fn new() -> Self {
        AttemptCapturingPokemonEventUnmarshaller
    }
}
impl ::aws_smithy_eventstream::frame::UnmarshallMessage
    for AttemptCapturingPokemonEventUnmarshaller
{
    type Output = crate::model::AttemptCapturingPokemonEvent;
    type Error = crate::error::AttemptCapturingPokemonEventError;
    fn unmarshall(
        &self,
        message: &::aws_smithy_types::event_stream::Message,
    ) -> std::result::Result<
        ::aws_smithy_eventstream::frame::UnmarshalledMessage<Self::Output, Self::Error>,
        ::aws_smithy_eventstream::error::Error,
    > {
        let response_headers = ::aws_smithy_eventstream::smithy::parse_response_headers(message)?;
        match response_headers.message_type.as_str() {
            "event" => match response_headers.smithy_type.as_str() {
                "event" => {
                    let mut builder = crate::model::capturing_event::Builder::default();
                    builder = builder.set_payload(
                            Some(
                                crate::protocol_serde::shape_capturing_payload::de_capturing_payload_payload(&message.payload()[..])
                                                .map_err(|err| {
                                                    ::aws_smithy_eventstream::error::Error::unmarshalling(format!("failed to unmarshall payload: {}", err))
                                                })?
                            )
                        );
                    Ok(::aws_smithy_eventstream::frame::UnmarshalledMessage::Event(
                        crate::model::AttemptCapturingPokemonEvent::Event(builder.build()),
                    ))
                }
                _unknown_variant => {
                    return Err(::aws_smithy_eventstream::error::Error::unmarshalling(
                        format!("unrecognized :event-type: {}", _unknown_variant),
                    ));
                }
            },
            "exception" => {
                if response_headers.smithy_type.as_str() == "masterball_unsuccessful" {
                    let mut builder = crate::error::master_ball_unsuccessful::Builder::default();
                    builder = crate::protocol_serde::shape_master_ball_unsuccessful::de_master_ball_unsuccessful_json_err(&message.payload()[..], builder)
                                                            .map_err(|err| {
                                                                ::aws_smithy_eventstream::error::Error::unmarshalling(format!("failed to unmarshall masterball_unsuccessful: {}", err))
                                                            })?;
                    return Ok(::aws_smithy_eventstream::frame::UnmarshalledMessage::Error(
                        crate::error::AttemptCapturingPokemonEventError::MasterBallUnsuccessful(
                            builder.build(),
                        ),
                    ));
                }
                return Err(aws_smithy_eventstream::error::Error::unmarshalling(
                    format!(
                        "unrecognized exception: {}",
                        response_headers.smithy_type.as_str()
                    ),
                ));
            }
            value => {
                return Err(::aws_smithy_eventstream::error::Error::unmarshalling(
                    format!("unrecognized :message-type: {}", value),
                ));
            }
        }
    }
}
